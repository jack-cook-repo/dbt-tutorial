version: 2

sources:
  - name: looker_ecom
    project: bigquery-public-data
    dataset: thelook_ecommerce
    tables:
      - name: src_order_items
        identifier: order_items
        description: Table of items contained within an order

        columns:
          - name: "id"
            description: 'Unique identifier for an order item'
            tests:
              - unique
              - not_null

          - name: "order_id"
            description: Order ID that this order item relates to
            tests:
              - relationships:
                  to: source('looker_ecom', 'src_orders')
                  field: order_id

          - name: "user_id"
            description: User ID that this order item relates to
            tests:
              - not_null

          - name: "product_id"
            description: 'Product ID that this order item relates to'
            tests:
              - not_null

          - name: "inventory_item_id"
            description: Inventory item ID that this order item relates to

          - name: "created_at"
            description: When this row of data was created

          - name: "shipped_at"
            description: When this item was shipped

          - name: "delivered_at"
            description: When this item was delivered

          - name: "returned_at"
            description: When this item was returned, if applicable

          - name: "sale_price"
            description: sale_price

      - name: src_orders
        description: List of orders
        identifier: orders

        columns:
          - name: "order_id"
            description: order_id
            tests:

          - name: "user_id"
            description: user_id
            tests:

          - name: "status"
            description: status
            tests:

          - name: "gender"
            description: gender
            tests:

          - name: "created_at"
            description: created_at
            tests:

          - name: "returned_at"
            description: returned_at
            tests:

          - name: "shipped_at"
            description: shipped_at
            tests:

          - name: "delivered_at"
            description: delivered_at
            tests:

          - name: "num_of_item"
            description: num_of_item
            tests: